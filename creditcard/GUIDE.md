# Автотесты для CreditCard | Version 0.6

## Описание

Этот скрипт предназначен для тестирования различных функций программы `creditcard`, включая генерацию карт, их валидацию и получение информации о бренде и эмитенте карт. Все тесты выполняются автоматически и проверяют корректность работы программы в различных сценариях.

## Как использовать

1. **Подготовка**

   - Склонируйте на своем компьютере репозитории с проектом.
   - Создайте отдельный файл example.sh в директории проекта.
   - В нем вставьте код скрипта, предварительно скопировав из auto_tesh.sh

2. **Запуск автотестов**

   - Пропишите в консоль chmod +x example.sh
   - В командной строке выполните:
   ```bash
   bash auto_test.sh
   ```

   Скрипт проверяет каждый флаг, разные сценарии запуска, а так-же соответственно gofumpt.

3. **Описание тестов**

   Скрипт включает следующие тесты:

   - **Тест 1-2**: Проверка валидности одной карты с корректным и некорректным номером.
   - **Тест 3-4**: Проверка валидности нескольких карт и ввода через стандартный ввод.
   - **Тест 5-6**: Генерация карты и её валидация через стандартный ввод.
   - **Тесты 7-9**: Проверка ошибок при некорректных шаблонах генерации карт.
   - **Тесты 10-12**: Проверка ошибок при пустых строках и картах с пробелами.
   - **Тесты 13-18**: Генерация случайных карт с различными шаблонами и их валидация.
   - **Тест 19-20**: Генерация карты без звездочек и проверка ошибок.
   - **Тест 21-30**: Дополнительные тесты, включающие генерацию карт с конкретными шаблонами, проверку длины карты и ошибки при некорректных командах.
   - **Тест 31 - 36**: Проверка генерации карты через issue с разными данными

4. **Как интерпретировать результаты**

   - Тесты выводят результаты в следующем формате:

     ```bash
     [PASS] Тест: Описание теста
     ```

   - Если тест не прошел, вы увидите:

     ```bash
     [FAIL] Тест: Описание теста
     ```

   В случае ошибок скрипт выведет дополнительную информацию и значения, которые не совпали с ожидаемыми.

5. **Формат тестов**

   Каждый тест проверяет одну конкретную функциональность:

   - Вводные данные (например, номер карты или шаблон).
   - Ожидаемый результат (например, сообщение об ошибке или успешная валидация).
   - Вывод команды и сравнение с ожидаемым результатом.

   Пример:

   ```bash
   result=$(./creditcard validate "4400430180300003" 2>&1 || true)
   verify_output "OK" "$result" "1"
   ```

6. **Что делать при ошибках**

   - Если скрипт не прошел тест, обратите внимание на описание ошибки в выводе. Выведите список тест - кейсов через флаг list (./example.sh list)
   - Убедитесь, что ваши данные и шаблоны для генерации карт корректны.
   - Соберите проект заново, через ```bash go build -o creditcard . ```
   - Проверьте правильность пути к файлам с брендами и эмитентами карт (например, `brands.tet` и `issuers.txt`).
  

7. **Примечания**

   - Этот скрипт подходит только для тестирования программного обеспечения, связанного с генерацией и валидацией карт.
   - Все команды проверяются на корректность их выполнения и выводимые сообщения.

## Заключение

Этот набор автотестов помогает вам автоматизировать процесс тестирования программы Creditcard, гарантируя, что все функции работают корректно и без ошибок. Просто запустите скрипт и следите за выводом результатов для анализа состояния программы.
